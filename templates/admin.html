{% extends "layout.html" %} {% block content %}

<h1 class="visually-hidden">Admin Panel</h1>

<section>
  <h2>Nachrichten</h2>
  <div class="messages">
    <table>
      <tr>
        <th>Absender Email</th>
        <th>Absender Name</th>
        <th>Betreff</th>
        <th>Nachricht</th>
      </tr>
      {% for message in messages %}
      <tr>
        <td class="sender-email">{{ message.sender_email }}</td>
        <td class="sender-name">{{ message.sender_name }}</td>
        <td class="message-subject">{{ message.message_subject }}</td>
        <td class="message-text">{{message.message_text }}</td>
        <td>
          <a
            href="mailto:{{ message.sender_email }}?subject=Ihre Anfrage: {{ message.message_subject }}"
            ><span class="material-symbols-outlined"> mail </span>Nachricht
            beantworten</a
          >
        </td>
      </tr>
      {% endfor %}
    </table>
  </div>
</section>

<section>
  <h2>User</h2>
  <div class="messages">
    <table>
      <tr>
        <th>Username</th>
        <th>Rollen</th>
      </tr>
      {% for user in users %}
      <tr>
        <td class="username">{{ user.username }}</td>
        <td class="role">
          {% for role in user.roles %} {{ role.role_name }}, {% endfor %}
        </td>
        {% if state.CanUpdateUser %}
        <td>
          <a href="user/edit/{{user.user_id}}">
            <span class="material-symbols-outlined"> manage_accounts </span>
            User bearbeiten
          </a>
        </td>
        {% endif %}
      </tr>
      {% endfor %}
    </table>
  </div>
  {% if state.CanAddUser %}
  <a href="user/add">
    <span class="material-symbols-outlined"> person_add </span>
    User hinzuf√ºgen
  </a>
  {% endif %}
</section>
{% endblock %}
